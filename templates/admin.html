<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Gestione Dipendenti</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { display: inline-block; }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .user-info {
            font-size: 14px;
            color: #555;
        }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f5f5f5; }
        img { max-height: 80px; }
        .actions form { display: inline-block; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Gestione Dipendenti</h1>
        <div class="user-info">
            Loggato come: <strong>{{ session['user'] }}</strong> ({{ session['store'] }})
            | <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </div>

    <h2>Aggiungi nuovo dipendente</h2>
    <form method="POST" enctype="multipart/form-data">
        Nome: <input type="text" name="nome" required>
        Foto: <input type="file" name="foto" accept="image/*" required>
        <button type="submit">Aggiungi</button>
    </form>

    <h2>Lista Dipendenti</h2>
    <table>
        <tr>
            <th>Foto</th>
            <th>Nome</th>
            <th>Azioni</th>
        </tr>
        {% for id, nome, foto, store_id in dipendenti %}
        <tr>
            <td><img src="{{ url_for('static', filename='foto/' ~ foto) }}" alt="{{ nome }}"></td>
            <td>{{ nome }}</td>
            <td class="actions">
                <!-- Modifica -->
                <form action="{{ url_for('edit_dipendente', dipendente_id=id) }}" method="post" enctype="multipart/form-data">
                    <input type="text" name="nome" value="{{ nome }}" required>
                    <input type="file" name="foto" accept="image/*">
                    <button type="submit">Modifica</button>
                </form>
                <!-- Elimina -->
                <form action="{{ url_for('delete_dipendente', dipendente_id=id) }}" method="post" onsubmit="return confirm('Sei sicuro di voler eliminare questo dipendente?');">
                    <button type="submit">Elimina</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

</body>
</html>
